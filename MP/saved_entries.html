<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saved Exam Entries</title>
<style>
body { font-family: Arial; padding: 20px; }
table { border-collapse: collapse; width: 100%; margin-top: 20px; }
th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
th { background-color: #f0f0f0; }
button { padding: 10px 15px; margin-top: 10px; cursor:pointer; }
</style>
</head>
<body>

<h2>Saved Exam Entries</h2>
<table id="entries-table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Exam Title</th>
      <th>Start Time</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<button id="download-btn">Download CSV</button>

<script>
const tbody = document.querySelector('#entries-table tbody');

// Load entries from LocalStorage
const entries = JSON.parse(localStorage.getItem('examEntries') || '[]');

// Populate table
entries.forEach(e => {
  const tr = document.createElement('tr');
  tr.innerHTML = `<td>${e.name}</td><td>${e.email}</td><td>${e.title}</td><td>${e.time}</td>`;
  tbody.appendChild(tr);
});

// Download as CSV
document.getElementById('download-btn').addEventListener('click', ()=>{
  let csv = "Name,Email,Exam Title,Start Time\n";
  entries.forEach(e => {
    csv += `"${e.name}","${e.email}","${e.title}","${e.time}"\n`;
  });

  const blob = new Blob([csv], { type: 'text/csv' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'exam_entries.csv';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
});
</script>

</body>
</html>
