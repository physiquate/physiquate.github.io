<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Physiquate Exam Portal â€” Modern</title>

<!-- Google Font and icons -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- ===== Modern Styles ===== -->
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html,body { height: 100%; }
  body {
    font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,#f8fafc 0%, #eef2f7 100%);
    color: #0f172a;
    line-height: 1.45;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  header {
    background: #1e3a8a;
    color: #fff;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    box-shadow: 0 4px 18px rgba(2,6,23,0.12);
    position: sticky;
    top: 0;
    z-index: 1000;
  }
  .brand { display:flex; gap:12px; align-items:center; }
  .brand .logo { width: 60px; height: 60px; border-radius: 8px; display:flex; align-items:center; justify-content:center; font-size:0; }
  .brand .logo img { width:100%; height:100%; object-fit:contain; border-radius:8px; }
  .brand h1 { font-size:18px; font-weight:700; letter-spacing:0.2px; margin:0; }
  .brand p { font-size:12px; opacity:0.9; margin:0; }
  .header-right { display:flex; gap:12px; align-items:center; }
  .timer {
    background: rgba(255,255,255,0.08);
    padding: 6px 12px;
    border-radius: 8px;
    font-weight:600;
    display:flex; gap:8px; align-items:center;
  }
  .user-info { font-size:14px; color:rgba(255,255,255,0.95); }

  main {
    max-width: 1100px;
    margin: 28px auto;
    padding: 0 18px;
  }
  .exam-wrap { display: grid; grid-template-columns: 1fr 320px; gap: 20px; align-items: start; }
  @media (max-width: 920px) { .exam-wrap { grid-template-columns: 1fr; } }

  .card {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
  }
  .meta { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:12px; }
  .meta .title { font-weight:600; color:#0f172a; }
  .meta .small { font-size:13px; color:#475569; }

  .question { font-size:18px; font-weight:600; margin-bottom:14px; color:#0b1220; }
  .options { margin-top:6px; }
  .options label {
    display:flex;
    align-items:center;
    gap:12px;
    padding:10px 12px;
    border-radius:10px;
    border:1px solid #e6edf6;
    margin-bottom:10px;
    cursor:pointer;
    transition: all 0.16s ease;
    background: #fbfdff;
  }
  .options label:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(16,24,40,0.04); border-color:#cfe3ff; }
  .options input[type="radio"] { width:18px; height:18px; accent-color:#1e3a8a; }
  .options .opt-text { flex:1; font-size:15px; color:#111827; }
  .options input[type="radio"]:checked + .opt-text { font-weight:700; color:#0b1220; }
  @supports(selector(:has(*))) { .options label:has(input[type="radio"]:checked) { background: linear-gradient(90deg, rgba(219,234,254,0.35), rgba(235,241,255,0.5)); border-color: #1e3a8a; } }

  .side { display:flex; flex-direction:column; gap:12px; }
  .panel { background:#fff; border-radius:12px; padding:14px; box-shadow:0 8px 20px rgba(2,6,23,0.04); }
  .progress { height:12px; background:#eef2ff; border-radius:999px; overflow:hidden; }
  .progress > i { display:block; height:100%; width:0%; background: linear-gradient(90deg,#2563eb,#1e3a8a); transition: width 300ms ease; }

  .palette { display:grid; grid-template-columns: repeat(5,1fr); gap:8px; }
  .pal-btn { padding:10px; border-radius:8px; border:1px solid #e2e8f0; text-align:center; font-weight:600; cursor:pointer; background:#fff; }
  .pal-btn.answered { background:#dcfce7; border-color:#bbf7d0; color:#165b2e; }
  .pal-btn.current { box-shadow: 0 6px 18px rgba(16,24,40,0.06); border-color:#93c5fd; }

  .controls { display:flex; gap:10px; margin-top:14px; justify-content:space-between; align-items:center; }
  .controls .cta { background:#1e3a8a; color:#fff; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:600; }
  #start-exam, #download-csv, #home-btn { background: #059669; color: #fff; border: none; padding: 10px 14px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 15px; transition: all 0.16s ease; }
  #start-exam:hover, #download-csv:hover, #home-btn:hover { background: #047857; transform: translateY(-2px); box-shadow: 0 6px 18px rgba(16,24,40,0.04); }
  .controls .muted { background:#f1f5f9; color:#334155; border:none; padding:10px 12px; border-radius:8px; cursor:pointer; }

  .result-table { width:100%; border-collapse:collapse; margin-top:8px; font-size:14px; }
  .result-table th, .result-table td { padding:8px 10px; border:1px solid #e6eef9; text-align:left; }
  .result-table th { background:#f1f5f9; font-weight:600; }
  tr.correct-row { background-color: #e8f5e9; }
  tr.incorrect-row { background-color: #ffebee; }
  tr.unanswered-row { background-color:rgba(75, 78, 79, 0.2); }
  th, td { border:1px solid #ccc; padding:10px; text-align:left; }
  th { background-color:#e0f7fa; }
  .correct-text { color:#2e7d32; font-weight:bold; }
  .incorrect-text { color:#c62828; font-weight:bold; }
  @media (max-width:520px) { .palette { grid-template-columns: repeat(4,1fr); } .meta { flex-direction:column; align-items:flex-start; gap:6px; } .header-right { gap:6px; font-size:13px;} }

</style>

<!-- MathJax for LaTeX rendering -->
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>

<header>
  <div class="brand">
    <div class="logo"><img src="logo.png" alt="Physiquate Logo" /></div>
    <div>
      <h1>Physiquate</h1>
      <p style="opacity:0.85">Physics Competitive Exam Portal</p>
    </div>
  </div>
  <div class="header-right">
    <div class="user-info" id="header-exam-title">Mathematical Physics - Vector Calculus</div>
    <div class="timer" id="timer"><i class="fa-regular fa-clock"></i> <span id="timer-val">00:00</span></div>
  </div>
</header>

<main>
  <div class="exam-wrap">
    <!-- LEFT CARD -->
    <div class="card" id="left-card">
      <div id="student-form">
        <h2 style="margin-bottom:10px;">Enter Candidate Details</h2>
        <input type="text" id="student-name" placeholder="Full Name" style="padding:10px; width:100%; margin-bottom:10px; border-radius:6px; border:1px solid #ccc;">
        <input type="text" id="student-roll" placeholder="Roll Number" style="padding:10px; width:100%; margin-bottom:10px; border-radius:6px; border:1px solid #ccc;">
        <button id="start-exam">Start Exam</button>
      </div>

      <div id="exam-section" style="display:none;">
        <div class="meta">
          <div class="title" id="question-counter">Question 1</div>
          <div class="small" id="progress-text">0 / 0</div>
        </div>
        <div class="question" id="question-text">Question will appear here</div>
        <div class="options" id="options-container"></div>
        <div class="controls">
          <button class="muted" id="prev-btn">Previous</button>
          <button class="muted" id="next-btn">Next</button>
        </div>
      </div>

      <div id="result-section" style="display:none;">
        <h2>Exam Results</h2>
        <p id="score-text"></p>
        <button id="download-csv">Download CSV</button>
        <table class="result-table" id="result-table">
          <thead>
            <tr>
              <th>Q.No</th>
              <th>Question</th>
              <th>Your Answer</th>
              <th>Correct Answer</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <button id="home-btn">Go Home</button>
      </div>
    </div>

    <!-- RIGHT SIDE PANEL -->
    <div class="side">
      <div class="panel">
        <div>Progress</div>
        <div class="progress"><i id="progress-bar"></i></div>
        <div class="palette" id="palette-container"></div>
      </div>
    </div>
  </div>
</main>

<script>
const questions = [
  {
    question: "Compute the divergence of \\(\\vec{r} = x \\hat{i} + y \\hat{j} + z \\hat{k}\\).",
    options: ["0", "1", "3", "Cannot be determined"],
    answer: "3"
  },
  {
    question: "Evaluate the Laplacian of \\(r^2 = x^2 + y^2 + z^2\\).",
    options: ["0", "3", "6", "9"],
    answer: "6"
  },
  {
    question: "Which of the following is a unit vector?",
    options: ["\\(\\frac{\\hat{i}+\\hat{j}+\\hat{k}}{\\sqrt{3}}\\)", "\\(\\hat{i}+\\hat{j}+\\hat{k}\\)", "\\(2\\hat{i}-\\hat{j}\\)", "\\(\\hat{i}-\\hat{j}-\\hat{k}\\)"],
    answer: "\\(\\frac{\\hat{i}+\\hat{j}+\\hat{k}}{\\sqrt{3}}\\)"
  }
];

let currentQ = 0;
let studentAnswers = Array(questions.length).fill(null);
let timerInterval;
let totalTime = 15*60; // 15 mins

const studentForm = document.getElementById('student-form');
const examSection = document.getElementById('exam-section');
const resultSection = document.getElementById('result-section');
const questionText = document.getElementById('question-text');
const optionsContainer = document.getElementById('options-container');
const questionCounter = document.getElementById('question-counter');
const progressText = document.getElementById('progress-text');
const progressBar = document.getElementById('progress-bar');
const paletteContainer = document.getElementById('palette-container');
const timerVal = document.getElementById('timer-val');

function startTimer() {
  let time = totalTime;
  timerInterval = setInterval(() => {
    let m = Math.floor(time/60).toString().padStart(2,'0');
    let s = (time%60).toString().padStart(2,'0');
    timerVal.textContent = `${m}:${s}`;
    if(time-- <= 0) { clearInterval(timerInterval); showResult(); }
  },1000);
}

function renderQuestion() {
  const q = questions[currentQ];
  questionText.innerHTML = q.question;
  optionsContainer.innerHTML = '';
  q.options.forEach(opt => {
    const label = document.createElement('label');
    const radio = document.createElement('input');
    radio.type = 'radio';
    radio.name = 'option';
    radio.value = opt;
    if(studentAnswers[currentQ] === opt) radio.checked = true;
    radio.addEventListener('change', () => { studentAnswers[currentQ]=opt; updatePalette(); });
    const span = document.createElement('span');
    span.className='opt-text';
    span.innerHTML=opt;
    label.appendChild(radio);
    label.appendChild(span);
    optionsContainer.appendChild(label);
  });
  questionCounter.textContent = `Question ${currentQ+1}`;
  progressText.textContent = `${currentQ+1} / ${questions.length}`;
  updatePalette();
  MathJax.typesetPromise();
  updateProgressBar();
}

function updatePalette() {
  paletteContainer.innerHTML='';
  questions.forEach((q,i)=>{
    const btn=document.createElement('div');
    btn.className='pal-btn';
    if(studentAnswers[i]) btn.classList.add('answered');
    if(i===currentQ) btn.classList.add('current');
    btn.textContent=i+1;
    btn.addEventListener('click',()=>{ currentQ=i; renderQuestion(); });
    paletteContainer.appendChild(btn);
  });
}

function updateProgressBar() {
  const answered = studentAnswers.filter(a=>a!==null).length;
  progressBar.style.width = `${(answered/questions.length)*100}%`;
}

document.getElementById('start-exam').addEventListener('click', ()=>{
  const name=document.getElementById('student-name').value.trim();
  const roll=document.getElementById('student-roll').value.trim();
  if(!name||!roll){ alert('Enter details'); return; }
  studentForm.style.display='none';
  examSection.style.display='block';
  renderQuestion();
  startTimer();
});

document.getElementById('next-btn').addEventListener('click', ()=>{
  if(currentQ<questions.length-1){ currentQ++; renderQuestion(); }
});

document.getElementById('prev-btn').addEventListener('click', ()=>{
  if(currentQ>0){ currentQ--; renderQuestion(); }
});

function showResult() {
  clearInterval(timerInterval);
  examSection.style.display='none';
  resultSection.style.display='block';
  let score=0;
  const tbody=document.querySelector('#result-table tbody');
  tbody.innerHTML='';
  questions.forEach((q,i)=>{
    const tr=document.createElement('tr');
    let status='Unanswered';
    if(studentAnswers[i]===q.answer){ score++; status='Correct'; tr.classList.add('correct-row'); }
    else if(studentAnswers[i]!==null){ status='Incorrect'; tr.classList.add('incorrect-row'); }
    else tr.classList.add('unanswered-row');
    tr.innerHTML=`<td>${i+1}</td><td>${q.question}</td><td>${studentAnswers[i]||'-'}</td><td>${q.answer}</td><td>${status}</td>`;
    tbody.appendChild(tr);
  });
  document.getElementById('score-text').textContent=`Score: ${score} / ${questions.length}`;
  MathJax.typesetPromise();
}

document.getElementById('download-csv').addEventListener('click',()=>{
  let csv='Q.No,Question,Your Answer,Correct Answer,Status\n';
  questions.forEach((q,i)=>{
    let status='Unanswered';
    if(studentAnswers[i]===q.answer) status='Correct';
    else if(studentAnswers[i]!==null) status='Incorrect';
    csv+=`${i+1},"${q.question.replace(/"/g,'""')}","${studentAnswers[i]||''}","${q.answer}","${status}"\n`;
  });
  const blob = new Blob([csv], {type:'text/csv'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='exam_result.csv';
  a.click();
});

document.getElementById('home-btn').addEventListener('click',()=>{
  location.reload();
});
</script>

</body>
</html>
