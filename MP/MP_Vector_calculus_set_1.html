<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Physiquate Exam Portal</title>

<!-- ===== Basic CSS Styling ===== -->
<style>
  body { font-family: Arial, sans-serif; background-color: #f4f4f9; margin:0; padding:0; }
  header { position: sticky; top:0; background-color: #2196f3; color:white; padding:15px 20px; display:flex; justify-content:space-between; align-items:center; z-index:100; box-shadow:0 2px 6px rgba(0,0,0,0.2); }
  header h1 { font-size: 20px; margin:0; }
  .timer { font-weight:bold; }
  .container { max-width:800px; margin:40px auto; background-color:#fff; padding:30px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
  .form-group { margin-bottom:15px; }
  .form-group label { display:block; font-weight:bold; margin-bottom:5px; }
  .form-group input { width:100%; padding:8px; border-radius:5px; border:1px solid #ccc; }
  .btn, .nav-btn, .submit-btn { padding:12px 20px; border:none; border-radius:8px; cursor:pointer; font-size:16px; transition:0.3s; }
  .btn, .nav-btn { background-color:#2196f3; color:white; }
  .btn:hover, .nav-btn:hover { background-color:#1976d2; }
  .nav-btn:disabled { background-color:#90caf9; cursor:not-allowed; }
  .submit-btn { background-color:#4caf50; width:100%; margin-top:20px; color:white; }
  .submit-btn:hover { background-color:#388e3c; }
  .question { display:none; }
  .question.active { display:block; }
  .question p { font-weight:bold; }
  .options label { display:block; padding:10px; margin:6px 0; background-color:#f9f9f9; border-radius:5px; cursor:pointer; transition:0.3s; }
  .options label:hover { background-color:#e0f7fa; }
  input[type="radio"] { margin-right:10px; }
  .navigation { margin-top:20px; display:flex; justify-content:space-between; }
  .result { display:none; margin-top:30px; background-color:#f1f8e9; padding:20px; border-radius:10px; }
  .result h2 { color:#2e7d32; margin-top:0; }
  table { width:100%; border-collapse:collapse; margin-top:15px; }
  th, td { border:1px solid #ccc; padding:10px; text-align:left; }
  th { background-color:#e0f7fa; }
  .correct-text { color:#2e7d32; font-weight:bold; }
  .incorrect-text { color:#c62828; font-weight:bold; }
</style>

<!-- ===== MathJax Library for LaTeX support ===== -->
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>

<header>
  <h1>Physiquate Exam Portal</h1>
  <div class="timer" id="timer">00:00</div>
</header>

<div class="container">

  <div id="student-form">
    <h2>Enter Your Details</h2>
    <div class="form-group">
      <label for="student-name">Name</label>
      <input type="text" id="student-name" required>
    </div>
    <div class="form-group">
      <label for="student-email">Email ID</label>
      <input type="email" id="student-email" placeholder="example@domain.com" required>
    </div>
    <div class="form-group">
      <label for="exam-title">Exam Title</label>
      <input type="text" id="exam-title" value="Mathematical Physics Vector calculus - set 1" required>
    </div>
    <button class="btn" id="start-exam">Start Exam</button>
  </div>

  <div id="exam" style="display:none;">
    <div class="navigation">
      <button type="button" class="nav-btn" id="prev">Previous</button>
      <button type="button" class="nav-btn" id="next">Next</button>
    </div>
    <button type="button" class="submit-btn" id="submit-btn" style="display:none;">Submit Exam</button>
  </div>

  <div class="result" id="result">
    <h2>Exam Report</h2>
    <p id="student-info"></p>
    <p id="score-summary"></p>
    <table id="result-table">
      <thead>
        <tr>
          <th>Question</th>
          <th>Your Answer</th>
          <th>Correct Answer</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <button class="submit-btn" id="home-btn" style="width:auto; padding:10px 18px; margin-top:20px;">Home</button>
  </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', function(){

  // ===== Helper function to shuffle array =====
  function shuffleArray(array){
    for(let i=array.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  // =========================================== Step 1: Questions Array (inline LaTeX fixed) =====================================================
  let questionsArray = [
       { q: "If a force \\(\\vec{F}\\) is derivable from a potential function \\(V(r)\\), where \\(r\\) is the distance from the origin. It follows that", 
      options: ["&nabla; &times; F = 0","&nabla; &sdot; F = 0","\\(\\vec&nabla; V = 0\\)","\\(\\vec&nabla;^2 V = 0\\)"], 
      answer: 2 
      },
      { q: "The unit vector normal to the surface \\(x^2+y^2−z=1\\) at the point (1,1,1) is", 
      options: ["\\((\\hat{i} + \\hat{j} - \\hat{k})/\\sqrt{3}\\)","\\((2\\hat{i} + \\hat{j} - \\hat{k})/\\sqrt{6}\\)","\\((\\hat{i} + 2\\hat{j} - \\hat{k})/\\sqrt{6}\\)","\\((2\\hat{i} + 2\\hat{j} - \\hat{k})/3\\)"],
      answer: 0 
      },
      { q: "Identify the correct statement for the following a = 3i + 2 j and b = i + 2 j",
      options: ["The vectors a and b are linearly Independent","The vectors a and b are linearly dependent","The vectors a and b are orthogonal","The vectors a and b are normalized"], 
      answer: 0 
      },
      { q: "If A and B are constant vectors. Then \\(∇(A.(B × r))\\) is", 
      options: ["A . B","A×B","r","Zero"], 
      answer: 3 
      }, 
      { q: "The unit vector perpendicular to the surface \\(x^2 + y^2  +z^2 = 3\\) at the point (1, 1, 1) is", 
      options: ["\\(\\frac{\\hat{x} + \\hat{y} - \\hat{z}}{\\sqrt{3}}\\)","\\(\\frac{\\hat{x} - \\hat{y} - \\hat{z}}{\\sqrt{3}}\\)","\\(\\frac{\\hat{x} - \\hat{y} + \\hat{z}}{\\sqrt{3}}\\)","\\(\\frac{\\hat{x} +\\hat{y} + \\hat{z}}{\\sqrt{3}}\\)"], 
      answer: 3 
      }, 
      { q: "The direction of \\(\\vec{\\nabla} F\\) for a scalar field \\(f(x,y,z)=\\frac{1}{2} x^2-xy+\\frac{1}{2} z^2\\) at the point \\((1,1,2)\\) is", 
      options: ["\\(\\frac{-\\hat{j} - \\hat{2k}}{\\sqrt{5}}\\)","\\(\\frac{-\\hat{j} +\\hat{k}}{\\sqrt{5}}\\)","\\(\\frac{\\hat{j} -\\hat{2k}}{\\sqrt{5}}\\)","\\(\\frac{\\hat{j} + \\hat{2k}}{\\sqrt{5}}\\)"], 
      answer: 1 
      },
      { q: "In spherical polar coordinates \\((r,\\theta, \\phi)\\). the unit vector \\(\\hat{\\theta}\\) at \\((10,\\frac{\\pi}{4},\\frac{\\pi}{2})\\) is", 
      options: ["\\(\\hat{k}\\)","\\(\\frac{1}{\\sqrt{2}}(\\hat{j} +\\hat{k})\\)","\\(\\frac{1}{\\sqrt{2}}(-\\hat{j} +\\hat{k})\\)","\\(\\frac{1}{\\sqrt{2}}(\\hat{j} -\\hat{k})\\)"], 
      answer: 3 
      },
      { q: "Given \\(\\hat{V_1}=\\hat{i}-\\hat{j}\\) and \\(\\hat{V_2}=-2\\hat{i}+3\\hat{j}+2\\hat{k}\\) which one of the following makes \\(\\hat{V_3}\\) makes (\\(\\hat{V_1}, \\hat{V_2}, \\hat{V_3}\\)) a complete set for a three-dimensional real linear vector space?",
      options: ["\\(\\hat{V_3}=\\hat{i}+ \\hat{j}+4\\hat{k}\\)","\\(\\hat{V_3}=2\\hat{i}- \\hat{j}+2\\hat{k}\\)","\\(\\hat{V_3}=\\hat{i}+ 2\\hat{j}+6\\hat{k}\\)","\\(\\hat{V_3}=2\\hat{i}+ \\hat{j}+4\\hat{k}\\)"], 
      answer: 3 
      },
      { q: "Consider the set of vectors \\(\\frac{1}{\\sqrt{2}}(1,1,0)\\), \\(\\frac{1}{\\sqrt{2}}(0,1,1)\\), and \\(\\frac{1}{\\sqrt{2}}(1,0,1)\\). These 3 vectors are:",
      options: ["Linearly independent","Cannot form a basis in 3D real vector space","orthonormal","\\(\\frac{1}{\\sqrt{2}}(1,1,0)\\)  can be written as linear contribution of \\(\\frac{1}{\\sqrt{2}}(0,1,1)\\), and \\(\\frac{1}{\\sqrt{2}}(1,0,1)\\)"], 
      answer: 0 
      }, 
      { q: "If \\(\\vec{A}=x\\hat{e_x}+y\\hat{e_y}+z\\hat{e_z}\\), then \\(\\nabla^2 \\cdot \\vec{A}\\) is",
      options: ["\\(1\\)","\\(0\\)","\\(3\\)","\\(-3\\)"], 
      answer: 1 
      }, 
      { q: "If \\(\\vec{A}=x\\hat{e_x}+y\\hat{e_y}+z\\hat{e_z}\\), then \\(\\nabla^2 \\cdot \\vec{A}\\) is",
      options: ["\\(1\\)","\\(0\\)","\\(3\\)","\\(-3\\)"], 
      answer: 1 
      }, 
      { q: "Let \\(\\vec{a}\\) and \\(\\vec{b}\\) be two distinct three dimensional vectors. Then the component of \\(\\vec{b}\\) that is perpendicular to \\(\\vec{a}\\) is given by is",
      options: ["\\(\\frac{\\vec{a} \\times (\\vec{b} \\times \\vec{a})}{a^2}\\)","\\(\\frac{\\vec{a} \\times (\\vec{a} \\times \\vec{b})}{b^2}\\)","\\(\\frac{(\\vec{a} \\cdot \\vec{b}) \\vec{b}}{b^2}\\)","\\(\\frac{(\\vec{b} \\cdot \\vec{a}) \\vec{a}}{a^2}\\)"], 
      answer: 0 
      }, 
      { q: "A unit vector \\(\\hat{n}\\) on the \\(x-y\\) plane is at angle of \\(120 \\deg \\) with respect \\(\\hat{i}\\). The angle between the vectors \\( \\vec{u} = a \\hat{i} + b \\hat{n} \\) and \\( \\vec{v} = a \\hat{n} + b \\hat{i} \\) will be \\(60 \\deg \\) if b is equal to",
      options: ["\\(b = \\sqrt{3} \\frac{a}{ 2}\\)","\\(b =  \\frac{2a}{\\sqrt(3)}\\)","\\(b =  \\frac{a}{ 2}\\)","\\(b = a\\)"], 
      answer: 2 
      },
      { q: "The unit vector normal to the surface \\(x ^ 2 + y ^ 2 - z = 1 \\)  at the point P(1, 1, 1) is",
      options: ["\\(\\frac{\\hat{i} + \\hat {j} - \\hat {k}}{\\sqrt(3)}\\)","\\(\\frac{2\\hat{i} + \\hat {j} - \\hat {k}}{ \\sqrt(6)}\\)","\\(\\frac{\\hat{i} + 2\\hat {j} - \\hat {k}}{ \\sqrt(6)}\\)","\\(\\frac{2\\hat{i} + 2\\hat {j} - \\hat {k}}{ 3}\\)"], 
      answer: 3 
      },
      { q: "The unit vector perpendicular to the surface \\(x ^ 2 + y ^ 2 + z ^ 2 = 3 \\) at the point (1, 1, 1) is",
      options: ["\\(\\frac{\\hat {x} + \\hat {y} - \\hat {z}}{\\sqrt(3)}\\)","\\(\\frac{\\hat {x} - \\hat {y} - \\hat {z}}{\\sqrt(3)}\\)","\\(\\frac{\\hat {x} - \\hat {y} + \\hat {z}}{\\sqrt(3)}\\)","\\(\\frac{\\hat {x} + \\hat {y} + \\hat {z}}{\\sqrt(3)}\\)"],
      answer: 3 
      },
      { q: "The components of the unit vector perpendicular to the plane shown in the figure given below is:",
      options: ["\\(\\hat {n} = \\frac{6 \\hat {x} +3 \\hat {y} +2 \\hat {z}}{ 7}\\)","\\(\\hat {n} = \\frac{3 \\hat {x} +6 \\hat {y} +2 \\hat {z}}{ 7}\\)","\\(\\hat {n} = \\frac{6 \\hat {x} +2 \\hat {y} +3 \\hat {z}}{ 7}\\)","\\(\\hat {n} = \\frac{2 \\hat {x} +3 \\hat {y} +6 \\hat {z}}{ 7}\\)"],
      answer: 0 
      },
      { q: "The vector field \\(x z \\hat {i} +y \\hat {j}\\) in cylindrical polar coordinates is",
      options: ["\\(\\rho( z  cos^2 \\phi +sin^ 2 \\phi) \\hat {e}_\\rho + \\rho sin \\phi cos \\phi(1-z) \\hat {e}_\\phi\\)","\\(\\rho( z  cos^2 \\phi +sin^ 2 \\phi) \\hat {e}_\\rho + \\rho sin \\phi cos \\phi(1+z) \\hat {e}_\\phi\\)","\\(\\rho( z  sin^2 \\phi +cos^ 2 \\phi) \\hat {e}_\\rho + \\rho sin \\phi cos \\phi(1-z) \\hat {e}_\\phi\\)","\\(\\rho( z  sin^2 \\phi +cons^ 2 \\phi) \\hat {e}_\\rho + \\rho sin \\phi cos \\phi(1-z) \\hat {e}_\\phi\\)"],
      answer: 0 
      },
      { q: "Let \\(\\vec {r} \\)denote the position vector of any point in three-dimensional space, and \\(r =| \\vec {r} | \\)Then",
      options: ["\\(\\vec {\\nabla} \\cdot \\vec {r} = 0 and \\vec {\\nabla} \\times \\vec{r} = \\frac{\\vec {r}}{r}\\)","\\(\\vec {\\nabla} \\cdot \\vec {r} = 0 and \\nabla^2 \\vec{r} = 0\\)","\\(\\vec {\\nabla} \\cdot \\vec {r} = 3 and \\nabla^2 \\vec{r} = \\frac {\\vec {r}}{r^2}\\)","\\(\\vec {\\nabla} \\cdot \\vec {r} = 3 and \\vec {\\nabla} \\times \\vec{r} = 0\\)"],
      { q: "For vector function \\(\\vec {A} =10 \\hat {r} +5 sin \\theta \\hat {theta}\\) , the value of \\(\\vec{nabla} \\cdot \\vec{A} is:",
      options: ["\\((1 + sin \\theta)(10 / r)\\)","\\((1 + cos \\theta)(10 / r)\\)","\\((2 + cos \\theta)(10 / r)\\)"],
      answer: 3 
      },
      { q: " For vector function \\(\\vec{A} =r^ 2 sin \\theta \\hat{r} + 4r ^ 2 cos \\theta \\hat{\\theta} +r^ 2 tan \\theta \\hat{phi}\\) the value of \\(\\vec{\\nabla} \\cdot \\vec{A}\\) is: ",
      options: ["\\(4r cot \\theta cos \\theta\\)","\\(4r cot \\theta cosec \\theta\\)","\\(4r cot \\theta sin \\theta\\)","\\(4r cosec \\theta\\)"],
      answer: 3 
      },
  ];

  // ===== Shuffle questions =====
  questionsArray = shuffleArray(questionsArray);

  // ===== Shuffle options for each question =====
  questionsArray.forEach(q=>{
    const correctValue = q.options[q.answer];
    q.options = shuffleArray(q.options);
    q.answer = q.options.indexOf(correctValue);
  });

  // ===== Step 2: Generate Questions Dynamically =====
  const examDiv = document.getElementById('exam');
  questionsArray.forEach((item,index)=>{
    const qDiv = document.createElement('div');
    qDiv.classList.add('question');
    if(index===0) qDiv.classList.add('active');
    qDiv.id = `q${index+1}`;

    const p = document.createElement('p');
    p.innerHTML = `${index+1}. ${item.q}`;
    qDiv.appendChild(p);

    const optionsDiv = document.createElement('div');
    optionsDiv.classList.add('options');
    item.options.forEach((opt,i)=>{
      const label = document.createElement('label');
      label.innerHTML = `<input type="radio" name="q${index+1}" value="${i}"> ${opt}`;
      optionsDiv.appendChild(label);
    });
    qDiv.appendChild(optionsDiv);

    const navigationDiv = examDiv.querySelector('.navigation');
    examDiv.insertBefore(qDiv, navigationDiv);
  });

  // ===== Step 3: Start Exam Logic =====
  const studentForm = document.getElementById('student-form');
  const startBtn = document.getElementById('start-exam');
  const timerDisplay = document.getElementById('timer');
  const studentInfo = document.getElementById('student-info');
  let countdown;

  startBtn.addEventListener('click', ()=>{
    const name = document.getElementById('student-name').value.trim();
    const email = document.getElementById('student-email').value.trim();
    const title = document.getElementById('exam-title').value.trim();
    if(!name){ alert("Name required"); return; }
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if(!email || !emailPattern.test(email)){ alert("Valid email required"); return; }
    if(!title){ alert("Exam title required"); return; }

    studentInfo.innerHTML = `<strong>Name:</strong> ${name} | <strong>Email:</strong> ${email} | <strong>Exam:</strong> ${title}`;
    studentForm.style.display='none';
    examDiv.style.display='block';

    MathJax.typesetPromise();

    // ==================================================== Timer =================================================================================
    let time = 30*60;
    countdown = setInterval(()=>{
      let minutes = Math.floor(time/60);
      let seconds = time%60;
      timerDisplay.textContent = `${minutes}:${seconds<10?'0'+seconds:seconds}`;
      time--;
      if(time<0){
        clearInterval(countdown);
        alert("Time is up! Exam submitted.");
        submitExam();
      }
    },1000);
  });

  // ===== Step 4: Navigation =====
  const questions = document.querySelectorAll('.question');
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  const submitBtn = document.getElementById('submit-btn');
  let current = 0;

  function showQuestion(index){
    questions.forEach((q,i)=> q.classList.toggle('active',i===index));
    prevBtn.disabled = index===0;
    nextBtn.style.display = index===questions.length-1?'none':'inline-block';
    submitBtn.style.display = index===questions.length-1?'block':'none';
    MathJax.typesetPromise();
  }

  nextBtn.addEventListener('click', ()=>{ if(current<questions.length-1){ current++; showQuestion(current); } });
  prevBtn.addEventListener('click', ()=>{ if(current>0){ current--; showQuestion(current); } });
  showQuestion(current);

  // ===== Step 5: Submit Exam =====
  const resultDiv = document.getElementById('result');
  const scoreSummary = document.getElementById('score-summary');
  const tbody = document.querySelector("#result-table tbody");

  submitBtn.addEventListener('click', submitExam);

  function submitExam(){
    clearInterval(countdown);
    let score=0;
    tbody.innerHTML='';

    questionsArray.forEach((item,index)=>{
      const qDiv = document.getElementById(`q${index+1}`);
      const selected = qDiv.querySelector('input[type="radio"]:checked');
      const userAnswer = selected ? parseInt(selected.value):-1;
      const status = userAnswer===item.answer?'Correct':'Incorrect';
      if(status==='Correct') score++;

      tbody.innerHTML += `<tr>
        <td>${item.q}</td>
        <td class="${status==='Correct'?'correct-text':'incorrect-text'}">
          ${userAnswer===-1?'Not Answered':item.options[userAnswer]}
        </td>
        <td class="correct-text">${item.options[item.answer]}</td>
        <td class="${status==='Correct'?'correct-text':'incorrect-text'}">${status}</td>
      </tr>`;
    });

    const percentage = ((score/questionsArray.length)*100).toFixed(2);
    let grade='';
    if(percentage>=90) grade='A+';
    else if(percentage>=80) grade='A';
    else if(percentage>=70) grade='B';
    else if(percentage>=60) grade='C';
    else grade='F';

    scoreSummary.innerHTML=`Score: ${score}/${questionsArray.length} | Percentage: ${percentage}% | Grade: ${grade}`;

    examDiv.style.display='none';
    resultDiv.style.display='block';
    resultDiv.scrollIntoView({behavior:"smooth"});

    MathJax.typesetPromise();
  }

  const homeBtn = document.getElementById('home-btn');
  if (homeBtn) {
    homeBtn.addEventListener('click', function() {
      window.location.href = 'index.html';
    });
  }

});
</script>
</body>
</html>





